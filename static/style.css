/* ===================================
   Tokens / Reset
=================================== */
*,
*::before,
*::after { box-sizing: border-box; }

:root{
  --bg:        #0a0d14;
  --bg-2:      #0b1020;
  --surface:   rgba(17, 24, 39, .65);   /* glass */
  --surface-2: rgba(11, 17, 26, .6);
  --line:      #1f2937;
  --line-2:    #243145;
  --text:      #e7edf7;
  --muted:     #9fb0c8;
  --brand:     #66a3ff;
  --brand-2:   #8f7dff;
  --success:   #22c55e;
  --danger:    #ef4444;

  --radius:    14px;
  --shadow-1:  0 10px 30px rgba(0,0,0,.28);
  --shadow-2:  0 6px 18px rgba(0,0,0,.22);
}

html, body{ height:100%; }
body{
  margin:0;
  font-family: Inter, system-ui, Segoe UI, Arial, sans-serif;
  color:var(--text);
  background:
    radial-gradient(1200px 800px at -10% -20%, #0c1324 0%, transparent 55%),
    radial-gradient(1200px 800px at 110% 0%, #0a1122 0%, transparent 55%),
    linear-gradient(180deg, var(--bg) 0%, #080b10 100%);
  display:flex;
  min-height:100vh;
}

/* Scrollbar (webkit) */
*::-webkit-scrollbar{ width:10px; height:10px; }
*::-webkit-scrollbar-thumb{ background:#1f2a3e; border-radius:999px; }
*::-webkit-scrollbar-track{ background:transparent; }

/* ===================================
   Sidebar (conversas)
=================================== */
#sidebar{
  width:300px;
  padding:16px;
  display:flex; flex-direction:column; gap:16px;
  background: linear-gradient(180deg, rgba(15,20,30,.6), rgba(10,14,22,.5));
  border-right:1px solid var(--line);
  backdrop-filter: blur(14px);
}

.brand{
  font-weight:800; font-size:20px; letter-spacing:.2px;
  display:flex; align-items:center; gap:8px;
}
.brand span{ color:var(--brand); }

.primary{
  background: linear-gradient(90deg, var(--brand), var(--brand-2));
  color:#fff; border:0; padding:10px 12px; border-radius:12px; cursor:pointer;
  font-weight:700; box-shadow: var(--shadow-2);
  transition: transform .06s ease, filter .2s ease;
}
.primary:hover{ filter:brightness(1.08); }
.primary:active{ transform: translateY(1px); }

.nav{ display:flex; flex-direction:column; gap:8px; }
.nav-item{
  width:100%; text-align:left;
  padding:10px 12px; border-radius:12px; cursor:pointer;
  color:var(--text);
  border:1px solid var(--line-2);
  background: var(--surface-2);
  backdrop-filter: blur(8px);
  transition: border-color .2s ease, box-shadow .2s ease, transform .06s ease;
}
.nav-item:hover{ border-color: var(--brand); }
.nav-item.active{
  border-color: var(--brand);
  box-shadow: 0 0 0 1px rgba(102,163,255,.25) inset;
}

.threads{ flex:1; overflow:auto; }
.threads-title{
  font-size:12px; color:var(--muted); margin:8px 0; letter-spacing:.2px; text-transform:uppercase;
}
#thread-list{
  list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:8px;
}
#thread-list li{
  background: var(--surface);
  border:1px solid var(--line-2);
  border-radius:12px; padding:10px; cursor:pointer;
  transition: border-color .2s ease, transform .06s ease;
  backdrop-filter: blur(10px);
}
#thread-list li:hover{ border-color: var(--brand); }
#thread-list li:active{ transform: translateY(1px); }
#thread-list li.active{ border-color: var(--brand); }
#thread-list .title{ font-weight:700; font-size:14px; }
#thread-list .preview{
  font-size:12px; color:var(--muted); margin-top:2px;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

/* ===================================
   Main + Views
=================================== */
#main{ flex:1; display:flex; min-width:0; }

.view{ display:none; flex-direction:column; width:100%; min-width:0; }
.view.active{ display:flex; }

.topbar{
  position:sticky; top:0; z-index:5;
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  padding:12px 16px;
  border-bottom:1px solid var(--line);
  background: linear-gradient(180deg, rgba(15,20,30,.65), rgba(11,15,22,.4));
  backdrop-filter: blur(10px);
}
.topbar h1{ margin:0; font-size:16px; font-weight:800; letter-spacing:.2px; }
.topbar .actions{ display:flex; gap:8px; }

.soft{
  background: rgba(19,32,50,.7);
  border:1px solid #27344c;
  color:#d6e6ff;
  padding:8px 12px; border-radius:10px; cursor:pointer;
  transition: filter .2s ease, transform .06s ease, border-color .2s ease;
}
.soft:hover{ filter:brightness(1.06); border-color:#2f4263; }
.soft:active{ transform: translateY(1px); }

/* ===================================
   Chat (conversa)
=================================== */
#chat{
  padding:18px; flex:1; min-height:0; overflow:auto;
  display:flex; flex-direction:column; gap:12px;
}

.mensagem{
  position:relative;
  max-width:72%;
  padding:12px 14px;
  border-radius:18px;
  line-height:1.6;
  white-space:pre-wrap;
  border:1px solid transparent;
  box-shadow: var(--shadow-1);
  animation: fadeIn .18s ease;
}
.user{
  align-self:flex-end;
  background: linear-gradient(180deg, #11241b, #0f1d19);
  border-color:#2a5a44;
}
.user::after{
  content:""; position:absolute; right:-6px; bottom:8px;
  width:12px; height:12px; background:inherit; border-right:1px solid #2a5a44; border-bottom:1px solid #2a5a44;
  transform: rotate(45deg); border-bottom-right-radius:3px;
}
.bot{
  align-self:flex-start;
  background: linear-gradient(180deg, #0f1726, #0d1422);
  border-color:#22314a;
}
.bot::after{
  content:""; position:absolute; left:-6px; bottom:8px;
  width:12px; height:12px; background:inherit; border-left:1px solid #22314a; border-bottom:1px solid #22314a;
  transform: rotate(-45deg); border-bottom-left-radius:3px;
}

/* markdown dentro das mensagens */
.mensagem p{ margin:0 0 8px; }
.mensagem ul, .mensagem ol{ margin:6px 0 8px 18px; }
.mensagem code{
  background:#0b1322; border:1px solid #1d2a40;
  padding:2px 6px; border-radius:6px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:.95em;
}
.mensagem pre{
  background:#0b1322; border:1px solid #1d2a40; border-radius:10px; padding:10px; overflow:auto;
}
.mensagem a{ color:#9ec1ff; text-decoration:none; }
.mensagem a:hover{ text-decoration:underline; }

/* composer */
.composer{
  display:flex; gap:10px; padding:12px;
  border-top:1px solid var(--line);
  background: linear-gradient(180deg, rgba(10,15,22,.7), rgba(8,12,18,.6));
  backdrop-filter: blur(10px);
}
.composer textarea, .composer input{
  flex:1; min-height:46px;
  border:1px solid #263249;
  background: #0a1220b3;
  color:var(--text);
  border-radius:14px; padding:12px 14px;
  resize:none; outline:none;
  transition: border-color .2s ease, box-shadow .2s ease;
}
.composer textarea:focus, .composer input:focus{
  border-color: var(--brand);
  box-shadow: 0 0 0 3px rgba(102,163,255,.15);
}
.composer button{
  min-width:98px; height:46px;
  background: linear-gradient(90deg, var(--brand), var(--brand-2));
  border:0; color:#fff; border-radius:14px; cursor:pointer; font-weight:800;
  transition: filter .2s ease, transform .06s ease;
}
.composer button:hover{ filter:brightness(1.07); }
.composer button:active{ transform: translateY(1px); }

/* animação de digitação (se usar) */
.typing{
  width:54px; height:18px; border-radius:999px;
  background: #111a2a; display:inline-flex; align-items:center; justify-content:center; gap:4px;
  border:1px solid #22314a;
}
.typing i{
  width:6px; height:6px; border-radius:50%; background:#9db8ff; opacity:.6;
  animation: blink 1s infinite;
}
.typing i:nth-child(2){ animation-delay:.15s; }
.typing i:nth-child(3){ animation-delay:.3s; }
@keyframes blink{ 0%,80%,100%{opacity:.2} 40%{opacity:1} }

/* ===================================
   Previsões – layout
=================================== */
.previsoes-layout{
  display:grid; gap:14px; padding:16px; width:100%;
  grid-template-columns: 1.1fr 1.2fr; /* chat + gráfico (sem sidebar própria) */
  height: calc(100vh - 64px);
}
.pv-with-sidebar{ grid-template-columns: 260px 1.05fr 1.15fr; }

/* Sidebar própria */
.pv-sidebar{
  border:1px solid var(--line);
  border-radius: var(--radius);
  background: var(--surface);
  backdrop-filter: blur(12px);
  display:flex; flex-direction:column; gap:12px; padding:12px; height:100%;
}
.pv-sb-head{ display:flex; flex-direction:column; gap:10px; }
.pv-sb-title{ font-weight:800; font-size:14px; }
.pv-sb-subtitle{ font-size:12px; color:var(--muted); }

.pv-historico{
  list-style:none; margin:0; padding:0; flex:1; overflow:auto;
  display:flex; flex-direction:column; gap:10px;
}
.pv-historico li{
  background: var(--surface-2);
  border:1px solid var(--line-2);
  border-radius:12px; padding:10px; cursor:pointer;
  transition: border-color .2s ease, transform .06s ease;
}
.pv-historico li:hover{ border-color: var(--brand); }
.pv-h-item-title{ font-weight:700; font-size:13px; }
.pv-h-item-date{ font-size:11px; color:var(--muted); margin-top:2px; }

/* Painel de conversa das previsões */
.pv-chat{
  display:flex; flex-direction:column; overflow:hidden;
  border:1px solid var(--line);
  border-radius: var(--radius);
  background: var(--surface);
  backdrop-filter: blur(10px);
  box-shadow: var(--shadow-2);
}
.pv-log{
  flex:1; padding:14px; overflow:auto; display:flex; flex-direction:column; gap:12px;
}

/* Painel do gráfico */
.pv-chart{
  border:1px solid var(--line);
  border-radius: var(--radius);
  padding:12px;
  background: var(--surface);
  backdrop-filter: blur(10px);
  display:flex; flex-direction:column; min-height:0;
}
#pv-canvas{ width:100%; height:360px; }

/* Lista de artigos */
.pv-articles{
  margin-top:10px; font-size:14px; color:#cbd5e1; max-height:260px; overflow:auto;
}
.pv-articles a{ color:#9ec1ff; text-decoration:none; }
.pv-articles a:hover{ text-decoration:underline; }

/* ===================================
   Utilities / Effects
=================================== */
@keyframes fadeIn{ from{opacity:0; transform:translateY(4px)} to{opacity:1; transform:none} }
:focus-visible{ outline:2px solid rgba(102,163,255,.45); outline-offset:2px; border-radius:10px; }

/* ===================================
   Responsive
=================================== */
@media (max-width:1200px){
  .pv-with-sidebar{ grid-template-columns: 220px 1fr 1fr; }
}
@media (max-width:1024px){
  #sidebar{ display:none; }
  .previsoes-layout{ grid-template-columns: 1fr; }
  .pv-sidebar{ display:none; }
  .mensagem{ max-width:100%; }
}
@media (max-width:600px){
  .topbar{ padding:10px 12px; }
  #chat{ padding:12px; }
  .composer{ padding:10px; gap:8px; }
}
